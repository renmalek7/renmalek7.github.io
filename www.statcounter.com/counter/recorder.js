"use strict";var _statcounter=function(_1){var _2={EventType:{DomContentLoaded:0,Load:1,FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Custom:5},IncrementalSource:{Mutation:0,MouseMove:1,MouseInteraction:2,Scroll:3,ViewportResize:4,Input:5,TouchMove:6,MediaInteraction:7,StyleSheetRule:8},MouseInteractions:{MouseUp:0,MouseDown:1,Click:2,ContextMenu:3,DblClick:4,Focus:5,Blur:6,TouchStart:7,TouchMove_Departed:8,TouchEnd:9}};try{var _3=(window.top&&window.top.document?window.top.document:document)}catch(e){var _3=window.document}var _4={};if(typeof _1==="undefined"){}else{if(_1.start_recording){return _1}else{if(_1.record_pageview){_4=_1}else{_4._pageview_tags_in=_1}}}var _5;var _6=[];var _7=false;var _8=false;var _9=1000;var _a=false;var _b=false;var _c=false;var _d=false;function get_rrweb_config(_e){var _f=true;if(_statcounter.getSessionConfig("sc_unmask_"+_e)==1){_f=false}return {emit:rrwebEmission,maskAllInputs:_f,slimDOMOptions:"all",blockClass:"session-replay-block",}}var _10={};var _11={};var _12={};var _13={};var _14={};var _15=1;var _16=Math.pow(2,23)/8;var _17=Math.pow(2,19)/8;var _18=false;var _19="on";_4.start_recording=function(_1a,_1b){_19=_1b;if(_1a!==undefined){if(_18!==false){if(_18===_1a){}else{console.warning("Blocked recording of project p"+_1a+" as Statcounter is already recording this page as part of p"+_18+" (recording multiple projects at the same time is not supported)")}return}_18=_1a}else{if(typeof (sc_project)==="undefined"){return}else{_18=sc_project}}_statcounter._rrwebRecord(get_rrweb_config(_18));setupWebsocket()};function send(_1c){if(_8){return}try{if(!_a){_1c["project"]=_18,_1c["visitor"]=_b.replace(/^\./,""),_1c["session"]=_c}var msg=JSON.stringify(_1c);if(msg.length>_16){var sig=(Math.random()*16777215<<0).toString(16);var _1f=Math.ceil(msg.length/_16);var _20=Math.ceil(msg.length/_1f);for(var i=0;i<_1f;i++){var _22=msg.substring(_20*i,_20*(i+1));_5.send("part:"+sig+":"+(i+1)+":"+_1f+":"+_22)}}else{_5.send(msg)}_a=true;_9=1000}catch(e){if(_6===false){_6=[]}_6.push(_1c);_a=false}}function retryWebsocket(){if(_7!==false){return}if(_8){return}if(_5&&_5.readyState===WebSocket.OPEN){return}if(_6===false){_6=[]}_5=null;setTimeout(setupWebsocket,_9);_9*=1.5}function setupWebsocket(){if(_8){return}try{if(_19=="dev"||_19.indexOf("wsdev")!==-1){_5=new WebSocket("wss://dev.statcounter.io/")}else{_5=new WebSocket("wss://statcounter.io/")}}catch(e){retryWebsocket();return}_a=false;_5.onclose=retryWebsocket;_5.onopen=function(){_5.onmessage=handleServerMessage;while(_6.length){send(_6.shift())}_6=false;_7=false}}function handleServerMessage(m){var j=JSON.parse(m.data);var _25=false;if(j.payload&&j.payload.required){_25=j.payload["required"]}else{if(j.required){_25=j["required"]}}if(j.type=="rrweb-DOM-request"){var _26=[];var _27=0;for(var i=0;i<_25.length;i++){var _29=_25[i];var _2a=[_29,_11[_29],_10[_29]];if(_12[_29]>_16/2){sendEvent("DOM-response",{"content":[_2a]})}else{_26.push(_2a);_27+=_12[_29]}if(_27>_16/2||i==_25.length-1){if(_26.length){sendEvent("DOM-response",{"content":_26})}_27=0;_26=[]}}_10={};_11={};_12={}}if(j.type=="hangup"){_8=true;turn_off_and_clean_up()}}function turn_off_and_clean_up(){if(_statcounter._rrwebRecord){_statcounter._rrwebRecord.stop();delete _statcounter._rrwebRecord}if(_2b){clearTimeout(_2b)}_6=[];if(_5){_5.close()}}function sendEvent(_2c,e){if(_8){return}if(_2c===false){}else{if(e["type"]!==undefined){if(!(e["type"]==2&&_2c=="pageload")){e["dupe_type"]=_2c}}else{e["type"]=_2c}}if(_c===false){_c=_statcounter.get_session_num(_18);_b=_statcounter.get_visitor_id();_d=_statcounter.get_tab_session()}e["tab"]=_d;if(_7=="reactivate"&&e.type==4){e.data.referrer="session-increment";if(_6.length){e.timestamp=_6[0].timestamp-2}_6.unshift(e)}else{if(_7=="reactivate"&&_2c=="pageload"&&_6[0].type==4){if(_6.length>1){e.timestamp=_6[1].timestamp-1}_6.splice(1,0,e);_7="sending";setupWebsocket()}else{if(_6===false&&_7===false){send(e)}else{if(_6===false){_6=[]}_6.push(e)}}}return e}function log(_2e){console.log(JSON.stringify(_2e,null,4))}function murmurhash3_32_gc(key,_30){var _31,_32,h1,h1b,c1,c1b,c2,c2b,k1,i;_31=key.length&3;_32=key.length-_31;h1=_30;c1=3432918353;c2=461845907;i=0;while(i<_32){k1=((key.charCodeAt(i)&255))|((key.charCodeAt(++i)&255)<<8)|((key.charCodeAt(++i)&255)<<16)|((key.charCodeAt(++i)&255)<<24);++i;k1=((((k1&65535)*c1)+((((k1>>>16)*c1)&65535)<<16)))&4294967295;k1=(k1<<15)|(k1>>>17);k1=((((k1&65535)*c2)+((((k1>>>16)*c2)&65535)<<16)))&4294967295;h1^=k1;h1=(h1<<13)|(h1>>>19);h1b=((((h1&65535)*5)+((((h1>>>16)*5)&65535)<<16)))&4294967295;h1=(((h1b&65535)+27492)+((((h1b>>>16)+58964)&65535)<<16))}k1=0;switch(_31){case 3:k1^=(key.charCodeAt(i+2)&255)<<16;case 2:k1^=(key.charCodeAt(i+1)&255)<<8;case 1:k1^=(key.charCodeAt(i)&255);k1=(((k1&65535)*c1)+((((k1>>>16)*c1)&65535)<<16))&4294967295;k1=(k1<<15)|(k1>>>17);k1=(((k1&65535)*c2)+((((k1>>>16)*c2)&65535)<<16))&4294967295;h1^=k1}h1^=key.length;h1^=h1>>>16;h1=(((h1&65535)*2246822507)+((((h1>>>16)*2246822507)&65535)<<16))&4294967295;h1^=h1>>>13;h1=((((h1&65535)*3266489909)+((((h1>>>16)*3266489909)&65535)<<16)))&4294967295;h1^=h1>>>16;return h1>>>0}function fragmentRrwebContent(_3b,_3c,_3d){if(_3b["id"]){if(_3b["id"]==_15){delete _3b["id"];_15++}else{console.log("error id mismatch");_3b["unexpected_id"]=true;_3b["visitor"]=_b;_3b["session"]=_c;_3b["recorder_version"]="15d540-ab440c65a7282a2dc528a3297d6729361ba0a2ce-81ae50ac7c355470fbee5f344dec8e660dd42123";_3b["id_class_counts"]=_3d!==undefined;_3b["dupe_ids"]=JSON.stringify(_14);_15=parseInt(_3b["id"])+1}}else{if(_3d===undefined){_3b["missing_id"]=true}}if(_3b.attributes){_3b.attributes=Object.keys(_3b.attributes).sort().reduce(function(_3e,key){_3e[key]=_3b.attributes[key];return _3e},{})}if(_3b.childNodes&&Object.keys(_3b.childNodes).length==0&&_3b.type==2){delete _3b["childNodes"]}else{if(_3b.childNodes){for(var i=0;i<_3b.childNodes.length;i++){var cn=_3b.childNodes[i];if(typeof cn!=="string"){_3b.childNodes[i]=fragmentRrwebContent(cn,_3b,_3d)}}}}var _42=null;if(_3b.attributes&&Object.keys(_3b.attributes).length==0&&_3b.type==2){delete _3b["attributes"]}else{if(_3b.attributes){if(_3b.attributes["id"]){_42="#"+_3b.attributes["id"];if(_42.match(/^#(block-)?yui_/)){var _43=_42.split("_");if(_43.length>2&&_43[_43.length-2].match(/^[0-9]{13}$/)){_42=_43.slice(0,_43.length-2).join("_")+"_"+_43[_43.length-1]}}}else{if(_3d!==undefined&&_3b.attributes["class"]){var _44=_3b.attributes["class"].split(" ");for(var i=0;i<_44.length;i++){if(_3d[_44[i]]==1){_42="."+_44[i];break}}}}}}if(_3b.type==2&&_3b.tagName){delete _3b["type"]}if(_42&&_10[_42]!==undefined&&JSON.stringify(_10[_42])!=JSON.stringify(_3b)){for(var i=0;i<_13[_42].length;i++){for(var j=0;j<_13[_42][i].childNodes.length;j++){if(_13[_42][i].childNodes[j]==_42){_13[_42][i].childNodes[j]=_10[_42]}}}delete _10[_42];_14[_42]=true}var _46=false;if(_42&&_14[_42]===undefined){if(_10[_42]!==undefined&&JSON.stringify(_10[_42])==JSON.stringify(_3b)){_13[_42].push(_3c)}else{_13[_42]=[_3c]}_46=_42}else{if(_3b.tagName=="head"){_46=_3b.tagName+"://"+_3.location.host+_3.location.pathname}else{if(_3b.tagName=="body"){_46=_3b.tagName}else{if(_3b.attributes&&_3b.attributes["_cssText"]&&_3b.attributes["_originalHref"]){_46=_3b.attributes["_originalHref"]}else{if(_3b.tagName=="style"&&_3c.tagName=="head"){if(!_3c._style_fragment_nth){_3c._style_fragment_nth=1}_46="head>style:nth-of-type("+(_3c._style_fragment_nth++)+")"}}}}}if(_46){if(_3d===undefined&&_3b.childNodes&&_3b.childNodes.length&&JSON.stringify(_3b).length>_17){_3b=refragmentRrwebContentByClass(_3b,_3c)}_10[_46]=_3b;return _46}else{if(_3b.type==3&&_3b.textContent&&Object.keys(_3b).length==2){return _3b.textContent}else{return _3b}}}function refragmentRrwebContentByClass(_47,_48){var _49={};countClasses(_47,_49);for(var i=0;i<_47.childNodes.length;i++){var cn=_47.childNodes[i];if(typeof cn!=="string"){_47.childNodes[i]=fragmentRrwebContent(cn,_47,_49)}}return _47}function countClasses(_4c,_4d){for(var i=0;i<_4c.childNodes.length;i++){var cn=_4c.childNodes[i];if(cn.attributes&&cn.attributes["class"]){var _50=cn.attributes["class"].split(/\s+/);for(var j=0;j<_50.length;j++){if(_4d[_50[j]]===undefined){_4d[_50[j]]=_3.getElementsByClassName(_50[j]).length}}}if(cn.childNodes&&cn.childNodes.length){countClasses(cn,_4d)}}}var _2b=false;var _52=(new Date()).getTime()/1000;var _53=(new Date()).getTime()/1000;function rrwebEmission(_54){var _55=_54.type==_2.EventType.IncrementalSnapshot&&(_54.data.source==_2.IncrementalSource.MouseMove||(_54.data.source==_2.IncrementalSource.MouseInteraction&&(_54.data.type==_2.MouseInteractions.MouseDown||_54.data.type==_2.MouseInteractions.Click||_54.data.type==_2.MouseInteractions.DblClick||_54.data.type==_2.MouseInteractions.TouchStart))||_54.data.source==_2.IncrementalSource.Scroll||_54.data.source==_2.IncrementalSource.Input||_54.data.source==_2.IncrementalSource.TouchMove);var now=(new Date()).getTime()/1000;if(_55&&_7===false){if(now-_53>120){var _57=_statcounter.update_cookie(_18);if(_57["session_incremented"]){_c=_statcounter.get_session_num(_18);_7=true;if(_5){_5.close()}}_53=now}}if(_55){_52=now}else{if(now-_52>1800){_6=[];_52=now}}var _58=_54.type==_2.EventType.IncrementalSnapshot&&_54.data.source==_2.IncrementalSource.Mutation;if(_7===true){if(_55){var _59="?sc_project="+_18+"&u1="+_b+"&sn="+_c;_statcounter.get_config(_59,function(_5a){if(_5a["visitor_recording"]!==0){_7="reactivate";_statcounter._rrwebRecord.stop();_statcounter._rrwebRecord(get_rrweb_config(_18))}else{turn_off_and_clean_up()}});_7="pending"}else{return}}if(!_58){if(_2b){clearTimeout(_2b)}_2b=setTimeout(function(){_statcounter._rrwebRecord.freezePage()},25000)}if(_54.type!==2){if(_54.type===4){_54.data.referrer=_statcounter.get_referrer();try{_54.data.config=JSON.parse(sessionStorage.getItem("statcounter_config"));_54.data.raw_cookie=_3.cookie;_54.data.counter_version=_statcounter.version();_54.data.recorder_version="15d540-ab440c65a7282a2dc528a3297d6729361ba0a2ce-81ae50ac7c355470fbee5f344dec8e660dd42123"}catch(e){}}if(_58){for(var k in {adds:1,removes:1,attributes:1,texts:1}){if(!_54.data[k].length){delete _54.data[k]}}delete _54.data["source"]}sendEvent(false,_54);return}if(false){var _5c=murmurhash3_32_gc(JSON.stringify(_54.data.node));var _5d=_3.location.host+_3.location.pathname;_10["(full)"+_5d]=_54.data.node;_11["(full)"+_5d]=_5c}var _54=JSON.parse(JSON.stringify(_54));_15=1;_54.data.node=fragmentRrwebContent(_54.data.node);for(var _5e in _10){var _5f=_10[_5e];if(_5e.substring(0,1)=="#"&&_5f.attributes&&_5f.attributes.id){delete _5f.attributes["id"];if(Object.keys(_5f.attributes).length==0){delete _5f["attributes"]}}if(_5f["_style_fragment_nth"]){delete _5f["_style_fragment_nth"]}var _60=JSON.stringify(_5f);var _5c=murmurhash3_32_gc(_60);_11[_5e]=_5c;_12[_5e]=_60.length}_13={};_14={};var _61=[];for(var _62 in _10){_61.push([_62,_11[_62]])}_54["key-sig-list"]=_61;sendEvent("pageload",_54)}_4._add_recording_event=function(_63,_64){_statcounter._rrwebRecord.addCustomEvent(_63,_64)};var _65,_66;if(typeof _3.hidden!=="undefined"){_65="hidden";_66="visibilitychange"}else{if(typeof _3.msHidden!=="undefined"){_65="msHidden";_66="msvisibilitychange"}else{if(typeof _3.webkitHidden!=="undefined"){_65="webkitHidden";_66="webkitvisibilitychange"}}}function handleVisibilityChange(){if(_statcounter._rrwebRecord){if(_3[_65]){console.log("hidden window");_4._add_recording_event("window-hidden");_statcounter._rrwebRecord.freezePage()}else{console.log("shown window");_4._add_recording_event("window-visible")}}}if(typeof _3.addEventListener==="undefined"||_65===undefined){}else{_3.addEventListener(_66,handleVisibilityChange,false)}return _4}(_statcounter);
// v: ab440c65a7282a2dc528a3297d6729361ba0a2ce-81ae50ac7c355470fbee5f344dec8e660dd42123
_statcounter._rrwebRecord=function(){"use strict";
var e,t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function n(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function r(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function o(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e}function a(e){var t,n=null===(t=e)||void 0===t?void 0:t.host;return Boolean(n&&n.shadowRoot&&n.shadowRoot===e)}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(e||(e={}));var i=1,s=RegExp("[^a-z0-9-_:]");function l(){return i++}function u(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).map(c).join(""):null}catch(e){return null}}function c(e){return function(e){return"styleSheet"in e}(e)?u(e.styleSheet)||"":e.cssText}var d=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,p=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,f=/^data:/i;function m(e,t){return(e||"").replace(d,(function(e,n,r,o,a,i){var s,l=r||a||i,u=n||o||"";if(!l)return e;if(!p.test(l))return"url("+u+l+u+")";if(f.test(l))return"url("+u+l+u+")";if("/"===l[0])return"url("+u+(((s=t).indexOf("//")>-1?s.split("/").slice(0,3).join("/"):s.split("/")[0]).split("?")[0]+l)+u+")";var c=t.split("/"),d=l.split("/");c.pop();for(var m=0,h=d;m<h.length;m++){var v=h[m];"."!==v&&(".."===v?c.pop():c.push(v))}return"url("+u+c.join("/")+u+")"}))}var h,v,y,g,b,S=/^[^ \t\n\r\u000c]+/,C=/^[, \t\n\r\u000c]+/;function k(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function w(){var e=document.createElement("a");return e.href="",e.href}function x(e,t,n,r){return"src"===n||("href"===n||"xlink:href"===n)&&r?k(e,r):"background"!==n||!r||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n&&r?function(e,t){if(""===t.trim())return t;var n=0;function r(e){var r,o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}for(var o=[];r(C),!(n>=t.length);){var a=r(S);if(","===a.slice(-1))a=k(e,a.substring(0,a.length-1)),o.push(a);else{var i="";a=k(e,a);for(var s=!1;;){var l=t.charAt(n);if(""===l){o.push((a+i).trim());break}if(s)")"===l&&(s=!1);else{if(","===l){n+=1,o.push((a+i).trim());break}"("===l&&(s=!0)}i+=l,n+=1}}}return o.join(", ")}(e,r):"style"===n&&r?m(r,w()):r:k(e,r)}function T(e,t,n){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){if("string"==typeof t){if(e.classList.contains(t))return!0}else e.classList.forEach((function(e){if(t.test(e))return!0}));return!(!n||!e.matches(n))||T(e.parentNode,t,n)}return e.nodeType,e.TEXT_NODE,T(e.parentNode,t,n)}function N(t,n){var r,o,a=n.doc,i=n.blockClass,l=n.blockSelector,c=n.maskTextClass,d=n.maskTextSelector,p=n.inlineStylesheet,f=n.maskInputOptions,h=void 0===f?{}:f,v=n.maskTextFn,y=n.recordCanvas;if(a.__sn){var g=a.__sn.id;r=1===g?void 0:g}switch(t.nodeType){case t.DOCUMENT_NODE:return{type:e.Document,childNodes:[],rootId:r};case t.DOCUMENT_TYPE_NODE:return{type:e.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:r};case t.ELEMENT_NODE:for(var b=function(e,t,n){if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=0;r<e.classList.length;r++){var o=e.classList[r];if(t.test(o))return!0}return!!n&&e.matches(n)}(t,i,l),S=function(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return s.test(t)?"div":t}(t),C={},k=0,N=Array.from(t.attributes);k<N.length;k++){var O=N[k],E=O.name,I=O.value;C[E]=x(a,S,E,I)}if("link"===S&&p){var M,_=Array.from(a.styleSheets).find((function(e){return e.href===t.href}));(M=u(_))&&(delete C.rel,C._originalHref=C.href,delete C.href,C._cssText=m(M,_.href))}if("style"===S&&t.sheet&&!(t.innerText||t.textContent||"").trim().length)(M=u(t.sheet))&&(C._cssText=m(M,w()));if("input"===S||"textarea"===S||"select"===S){I=t.value;"radio"!==C.type&&"checkbox"!==C.type&&"submit"!==C.type&&"button"!==C.type&&I?C.value=h[C.type]||h[S]?"*".repeat(I.length):I:t.checked&&(C.checked=t.checked)}if("option"===S){var L=t.parentElement;C.value===L.value&&(C.selected=t.selected)}if("canvas"===S&&y&&(C.rr_dataURL=t.toDataURL()),"audio"!==S&&"video"!==S||(C.rr_mediaState=t.paused?"paused":"played"),t.scrollLeft&&(C.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(C.rr_scrollTop=t.scrollTop),b){var D=t.getBoundingClientRect(),F=D.width,R=D.height;C={class:C.class,rr_width:F+"px",rr_height:R+"px"}}return"iframe"===S&&delete C.src,{type:e.Element,tagName:S,attributes:C,childNodes:[],isSVG:(o=t,"svg"===o.tagName||o instanceof SVGElement||void 0),needBlock:b,rootId:r};case t.TEXT_NODE:var A=t.parentNode&&t.parentNode.tagName,P=t.textContent,z="STYLE"===A||void 0,j="SCRIPT"===A||void 0;return z&&P&&(P=m(P,w())),j&&(P="SCRIPT_PLACEHOLDER"),!z&&!j&&T(t,c,d)&&P&&(P=v?v(P):P.replace(/[\S]/g,"*")),{type:e.Text,textContent:P||"",isStyle:z,rootId:r};case t.CDATA_SECTION_NODE:return{type:e.CDATA,textContent:"",rootId:r};case t.COMMENT_NODE:return{type:e.Comment,textContent:t.textContent||"",rootId:r};default:return!1}}function O(e){return void 0===e?"":e.toLowerCase()}function E(t,n){var r,o=n.doc,i=n.map,s=n.blockClass,u=n.blockSelector,c=n.maskTextClass,d=n.maskTextSelector,p=n.skipChild,f=void 0!==p&&p,m=n.inlineStylesheet,h=void 0===m||m,v=n.maskInputOptions,y=void 0===v?{}:v,g=n.maskTextFn,b=n.slimDOMOptions,S=n.recordCanvas,C=void 0!==S&&S,k=n.onSerialize,w=n.onIframeLoad,x=n.iframeLoadTimeout,T=void 0===x?5e3:x,I=n.isFullSnapshot,M=void 0!==I&&I,_=n.preserveWhiteSpace,L=void 0===_||_,D=n.ignoreChildren,F=void 0!==D&&D,R=N(t,{doc:o,blockClass:s,blockSelector:u,maskTextClass:c,maskTextSelector:d,inlineStylesheet:h,maskInputOptions:y,maskTextFn:g,recordCanvas:C});if(!R)return console.warn(t,"not serialized"),null;"__sn"in t&&!M?r=t.__sn.id:F||function(t,n,r){if(r.comment&&t.type===e.Comment)return!0;if(t.type===e.Element){if(r.script&&("script"===t.tagName||"link"===t.tagName&&"preload"===t.attributes.rel&&"script"===t.attributes.as))return!0;if(r.headFavicon&&("link"===t.tagName&&"shortcut icon"===t.attributes.rel||"meta"===t.tagName&&(O(t.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===O(t.attributes.name)||"icon"===O(t.attributes.rel)||"apple-touch-icon"===O(t.attributes.rel)||"shortcut icon"===O(t.attributes.rel))))return!0;if("meta"===t.tagName){if(r.headMetaDescKeywords&&O(t.attributes.name).match(/^description|keywords$/))return!0;if(r.headMetaSocial&&(O(t.attributes.property).match(/^(og|twitter|fb):/)||O(t.attributes.name).match(/^(og|twitter):/)||"pinterest"===O(t.attributes.name)))return!0;if(r.headMetaRobots&&("robots"===O(t.attributes.name)||"googlebot"===O(t.attributes.name)||"bingbot"===O(t.attributes.name)))return!0;if(r.headMetaHttpEquiv&&void 0!==t.attributes["http-equiv"])return!0;if(r.headMetaAuthorship&&("author"===O(t.attributes.name)||"generator"===O(t.attributes.name)||"framework"===O(t.attributes.name)||"publisher"===O(t.attributes.name)||"progid"===O(t.attributes.name)||O(t.attributes.property).match(/^article:/)||O(t.attributes.property).match(/^product:/)))return!0;if(r.headMetaVerification&&("google-site-verification"===O(t.attributes.name)||"yandex-verification"===O(t.attributes.name)||"csrf-token"===O(t.attributes.name)||"p:domain_verify"===O(t.attributes.name)||"verify-v1"===O(t.attributes.name)||"verification"===O(t.attributes.name)||"shopify-checkout-api-token"===O(t.attributes.name)))return!0}else if(r.adPlaceholder&&"ins"==t.tagName){var o=Array.from(n.childNodes).filter((function(e){return e.nodeType===e.ELEMENT_NODE}));if(1==o.length&&o[0].id&&"aswift_"===o[0].id.substring(0,7))return t.placeholderClass="rrweb-ad-placeholder",!0}}return!1}(R,t,b)||!L&&R.type===e.Text&&!R.isStyle&&!R.textContent.replace(/^\s+|\s+$/gm,"").length?(F=!0,r=-2):r=l();var A=Object.assign(R,{id:r});t.__sn=A,-2!==r&&(i[r]=t),k&&k(t);var P=!f;if(A.type===e.Element&&(P=P&&!A.needBlock,delete A.needBlock),(A.type===e.Document||A.type===e.Element)&&P){b.headWhitespace&&R.type===e.Element&&"head"===R.tagName&&(L=!1);for(var z={doc:o,map:i,blockClass:s,blockSelector:u,maskTextClass:c,maskTextSelector:d,skipChild:f,ignoreChildren:F,inlineStylesheet:h,maskInputOptions:y,maskTextFn:g,slimDOMOptions:b,recordCanvas:C,preserveWhiteSpace:L,onSerialize:k,onIframeLoad:w,iframeLoadTimeout:T,isFullSnapshot:M},j=0,H=Array.from(t.childNodes);j<H.length;j++){(B=E(H[j],z))&&A.childNodes.push(B)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(t)&&t.shadowRoot){A.isShadowHost=!0;for(var V=0,W=Array.from(t.shadowRoot.childNodes);V<W.length;V++){var B;(B=E(W[V],z))&&(B.isShadow=!0,A.childNodes.push(B))}}}return t.parentNode&&a(t.parentNode)&&(A.isShadow=!0),-2===r?A.type===e.Element&&A.placeholderClass?{type:e.Element,tagName:"div",attributes:{style:"width: "+t.clientWidth+"px;height: "+t.clientHeight+"px;",class:A.placeholderClass},childNodes:[],id:l()}:null:(A.type===e.Element&&"iframe"===A.tagName&&function(e,t,n){var r=e.contentWindow;if(r){var o,a=!1;try{o=r.document.readyState}catch(e){return}if("complete"===o){"about:blank"===r.location.href&&"about:blank"!==e.src&&""!==e.src?e.addEventListener("load",t):setTimeout(t,0)}else{var i=setTimeout((function(){a||(t(),a=!0)}),n);e.addEventListener("load",(function(){clearTimeout(i),a=!0,t()}))}}}(t,(function(){var e=t.contentDocument;if(e&&w){var n=E(e,{doc:e,map:i,blockClass:s,blockSelector:u,maskTextClass:c,maskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:y,maskTextFn:g,slimDOMOptions:b,recordCanvas:C,preserveWhiteSpace:L,onSerialize:k,onIframeLoad:w,iframeLoadTimeout:T});n&&w(t,n)}}),T),A)}function I(e,t,n){void 0===n&&(n=document);var r={capture:!0,passive:!0};return n.addEventListener(e,t,r),function(){return n.removeEventListener(e,t,r)}}!function(e){e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom"}(h||(h={})),function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag"}(v||(v={})),function(e){e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd"}(y||(y={})),function(e){e[e.Play=0]="Play",e[e.Pause=1]="Pause"}(g||(g={})),function(e){e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back"}(b||(b={}));var M="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",_={map:{},getId:function(){return console.error(M),-1},getNode:function(){return console.error(M),null},removeNodeFromMap:function(){console.error(M)},has:function(){return console.error(M),!1},reset:function(){console.error(M)}};function L(e,t,n){void 0===n&&(n={});var r=null,o=0;return function(a){var i=Date.now();o||!1!==n.leading||(o=i);var s=t-(i-o),l=this,u=arguments;s<=0||s>t?(r&&(window.clearTimeout(r),r=null),o=i,e.apply(l,u)):r||!1===n.trailing||(r=window.setTimeout((function(){o=!1===n.leading?0:Date.now(),r=null,e.apply(l,u)}),s))}}function D(e,t,n,r,o){void 0===o&&(o=window);var a=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set:function(e){var t=this;setTimeout((function(){n.set.call(t,e)}),0),a&&a.set&&a.set.call(this,e)}}),function(){return D(e,t,a||{},!0)}}function F(e,t,n){try{if(!(t in e))return function(){};var r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,function(){e[t]=r}}catch(e){return function(){}}}function R(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function A(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function P(e,t){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){var n=!1;return"string"==typeof t?n=e.classList.contains(t):e.classList.forEach((function(e){t.test(e)&&(n=!0)})),n||P(e.parentNode,t)}return e.nodeType,e.TEXT_NODE,P(e.parentNode,t)}function z(e){return"__sn"in e&&-2===e.__sn.id}function j(e){return Boolean(e.changedTouches)}function H(t){return"__sn"in t&&(t.__sn.type===e.Element&&"iframe"===t.__sn.tagName)}function V(e){var t;return Boolean(null===(t=e)||void 0===t?void 0:t.shadowRoot)}function W(e){return"__ln"in e}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(_=new Proxy(_,{get:function(e,t,n){return"map"===t&&console.error(M),Reflect.get(e,t,n)}}));var B=function(){function e(){this.length=0,this.head=null}return e.prototype.get=function(e){if(e>=this.length)throw new Error("Position outside of list range");for(var t=this.head,n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t},e.prototype.addNode=function(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&W(e.previousSibling)){var n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&W(e.nextSibling)&&e.nextSibling.__ln.previous){n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;this.length++},e.prototype.removeNode=function(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next&&(t.next.previous=t.previous)):(this.head=t.next,this.head&&(this.head.previous=null)),e.__ln&&delete e.__ln,this.length--)},e}(),$=function(e,t){return e+"@"+t};function U(e){return"__sn"in e}var q=function(){function e(){var e=this;this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=function(t){t.forEach(e.processMutation),e.emit()},this.emit=function(t){var r,o,i,s;if(!e.frozen&&!e.locked){void 0===t&&(t=Date.now());for(var l=[],u=new B,c=function(t){for(var n=t,r=-2;-2===r;)r=(n=n&&n.nextSibling)&&e.mirror.getId(n);return-1===r&&P(t.nextSibling,e.blockClass)&&(r=null),r},d=function(t){var n,r=t.getRootNode?null===(n=t.getRootNode())||void 0===n?void 0:n.host:null,o=!e.doc.contains(t)&&!e.doc.contains(r);if(t.parentNode&&!o){var i=a(t.parentNode)?e.mirror.getId(r):e.mirror.getId(t.parentNode);if(-2!==i){var s=c(t);if(-1===i||-1===s)return u.addNode(t);var d=E(t,{doc:e.doc,map:e.mirror.map,blockClass:e.blockClass,blockSelector:e.blockSelector,maskTextClass:e.maskTextClass,maskTextSelector:e.maskTextSelector,skipChild:!0,inlineStylesheet:e.inlineStylesheet,maskInputOptions:e.maskInputOptions,maskTextFn:e.maskTextFn,slimDOMOptions:e.slimDOMOptions,recordCanvas:e.recordCanvas,onSerialize:function(n){H(n)&&e.iframeManager.addIframe(n),V(t)&&e.shadowDomManager.addShadowRoot(t.shadowRoot,document)},onIframeLoad:function(t,n){e.iframeManager.attachIframe(t,n)}});d&&l.push({parentId:i,nextId:s,node:d})}}};e.mapRemoves.length;)e.mirror.removeNodeFromMap(e.mapRemoves.shift());try{for(var p=n(e.movedSet),f=p.next();!f.done;f=p.next()){var m=f.value;Y(e.removes,m,e.mirror)&&!e.movedSet.has(m.parentNode)||d(m)}}catch(e){r={error:e}}finally{try{f&&!f.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}try{for(var h=n(e.addedSet),v=h.next();!v.done;v=h.next()){m=v.value;K(e.droppedSet,m)||Y(e.removes,m,e.mirror)?K(e.movedSet,m)?d(m):e.droppedSet.add(m):d(m)}}catch(e){i={error:e}}finally{try{v&&!v.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}for(var y=null;u.length;){var g=null;if(y){var b=e.mirror.getId(y.value.parentNode),S=c(y.value);-1!==b&&-1!==S&&(g=y)}if(!g)for(var C=u.length-1;C>=0;C--){var k=u.get(C);b=e.mirror.getId(k.value.parentNode),S=c(k.value);if(-1!==b&&-1!==S){g=k;break}}if(!g){for(;u.head;)u.removeNode(u.head.value);break}y=g.previous,u.removeNode(g.value),d(g.value)}var w={texts:e.texts.map((function(t){return{id:e.mirror.getId(t.node),value:t.value}})).filter((function(t){return e.mirror.has(t.id)})),attributes:e.attributes.map((function(t){return{id:e.mirror.getId(t.node),attributes:t.attributes}})).filter((function(t){return e.mirror.has(t.id)})),removes:e.removes,adds:l};(w.texts.length||w.attributes.length||w.removes.length||w.adds.length)&&(e.texts=[],e.attributes=[],e.removes=[],e.addedSet=new Set,e.movedSet=new Set,e.droppedSet=new Set,e.movedMap={},e.emissionCallback(w,t))}},this.processMutation=function(t){if(!z(t.target))switch(t.type){case"characterData":var n=t.target.textContent;P(t.target,e.blockClass)||n===t.oldValue||e.texts.push({value:T(t.target,e.maskTextClass,e.maskTextSelector)&&n?e.maskTextFn?e.maskTextFn(n):n.replace(/[\S]/g,"*"):n,node:t.target});break;case"attributes":var r=t.target;n=r.getAttribute(t.attributeName);if(P(t.target,e.blockClass)||n===t.oldValue)return;var o=e.attributes.find((function(e){return e.node===t.target}));if(o||(o={node:t.target,attributes:{}},e.attributes.push(o)),"style"===t.attributeName){var i=e.doc.createElement("span");i.setAttribute("style",t.oldValue),void 0===o.attributes.style&&(o.attributes.style={});for(var s=0;s<r.style.length;s++){var l=r.style[s],u=r.style.getPropertyValue(l),c=r.style.getPropertyPriority(l);u==i.style.getPropertyValue(l)&&c==i.style.getPropertyPriority(l)||(o.attributes.style[l]=""==c?u:[u,c])}for(s=0;s<i.style.length;s++){l=i.style[s];""!==r.style.getPropertyValue(l)&&r.style.getPropertyValue(l)||(o.attributes.style[l]=!1)}}else o.attributes[t.attributeName]=x(e.doc,t.target.tagName,t.attributeName,n);break;case"childList":t.addedNodes.forEach((function(n){return e.genAdds(n,t.target)})),t.removedNodes.forEach((function(n){var r=e.mirror.getId(n),o=a(t.target)?e.mirror.getId(t.target.host):e.mirror.getId(t.target);P(n,e.blockClass)||P(t.target,e.blockClass)||z(n)||(e.addedSet.has(n)?(X(e.addedSet,n),e.droppedSet.add(n)):e.addedSet.has(t.target)&&-1===r||function e(t,n){if(a(t))return!1;var r=n.getId(t);return!n.has(r)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||e(t.parentNode,n))}(t.target,e.mirror)||(e.movedSet.has(n)&&e.movedMap[$(r,o)]?X(e.movedSet,n):e.removes.push({parentId:o,id:r,isShadow:!!a(t.target)||void 0})),e.mapRemoves.push(n))}))}},this.genAdds=function(t,n){if(!(P(t,e.blockClass)||n&&P(n,e.blockClass))){if(U(t)){if(z(t))return;e.movedSet.add(t);var r=null;n&&U(n)&&(r=n.__sn.id),r&&(e.movedMap[$(t.__sn.id,r)]=!0)}else e.addedSet.add(t),e.droppedSet.delete(t);t.childNodes.forEach((function(t){return e.genAdds(t)}))}}}return e.prototype.init=function(e,t,n,r,o,a,i,s,l,u,c,d,p,f){this.blockClass=t,this.blockSelector=n,this.maskTextClass=r,this.maskTextSelector=o,this.inlineStylesheet=a,this.maskInputOptions=i,this.maskTextFn=s,this.recordCanvas=l,this.slimDOMOptions=u,this.emissionCallback=e,this.doc=c,this.mirror=d,this.iframeManager=p,this.shadowDomManager=f},e.prototype.freeze=function(){this.frozen=!0},e.prototype.unfreeze=function(e){this.frozen=!1,this.emit(e)},e.prototype.isFrozen=function(){return this.frozen},e.prototype.lock=function(){this.locked=!0},e.prototype.unlock=function(){this.locked=!1,this.emit()},e}();function X(e,t){e.delete(t),t.childNodes.forEach((function(t){return X(e,t)}))}function Y(e,t,n){var r=t.parentNode;if(!r)return!1;var o=n.getId(r);return!!e.some((function(e){return e.id===o}))||Y(e,r,n)}function K(e,t){var n=t.parentNode;return!!n&&(!!e.has(n)||K(e,n))}function J(e){if(!e||!e.outerHTML)return"";for(var t="";e.parentElement;){var n=e.localName;if(!n)break;n=n.toLowerCase();var r=e.parentElement,o=[];if(r.children&&r.children.length>0)for(var a=0;a<r.children.length;a++){var i=r.children[a];i.localName&&i.localName.toLowerCase&&i.localName.toLowerCase()===n&&o.push(i)}o.length>1&&(n+=":eq("+o.indexOf(e)+")"),t=n+(t?">"+t:""),e=r}return t}function G(e,t){var n={numOfKeysLimit:50};Object.assign(n,t);var r=[],o=[];return JSON.stringify(e,(function(e,t){if(r.length>0){var a=r.indexOf(this);~a?r.splice(a+1):r.push(this),~a?o.splice(a,1/0,e):o.push(e),~r.indexOf(t)&&(t=r[0]===t?"[Circular ~]":"[Circular ~."+o.slice(0,r.indexOf(t)).join(".")+"]")}else r.push(t);if(null==t)return t;if(function(e){if("object"==typeof e&&Object.keys(e).length>n.numOfKeysLimit)return!0;if("function"==typeof e)return!0;return!1}(t))return function(e){var t=e.toString();n.stringLengthLimit&&t.length>n.stringLengthLimit&&(t=t.slice(0,n.stringLengthLimit)+"...");return t}(t);if(t instanceof Event){var i={};for(var s in t){var l=t[s];Array.isArray(l)?i[s]=J(l.length?l[0]:null):i[s]=l}return i}return t instanceof Node?t instanceof HTMLElement?t?t.outerHTML:"":t.nodeName:t}))}var Z=function(){function e(e){this.fileName=e.fileName||"",this.functionName=e.functionName||"",this.lineNumber=e.lineNumber,this.columnNumber=e.columnNumber}return e.prototype.toString=function(){var e=this.lineNumber||"",t=this.columnNumber||"";return this.functionName?this.functionName+" ("+this.fileName+":"+e+":"+t+")":this.fileName+":"+e+":"+t},e}(),Q=/(^|@)\S+:\d+/,ee=/^\s*at .*(\S+:\d+|\(native\))/m,te=/^(eval@)?(\[native code])?$/,ne={parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(ee))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));if(!t)throw new Error("Cannot parse given url: "+e);return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(ee)}),this).map((function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"("),n=t.match(/ (\((.+):(\d+):(\d+)\)$)/),r=(t=n?t.replace(n[0],""):t).split(/\s+/).slice(1),o=this.extractLocation(n?n[1]:r.pop()),a=r.join(" ")||void 0,i=["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0];return new Z({functionName:a,fileName:i,lineNumber:o[1],columnNumber:o[2]})}),this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter((function(e){return!e.match(te)}),this).map((function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new Z({functionName:e});var t=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=e.match(t),r=n&&n[1]?n[1]:void 0,o=this.extractLocation(e.replace(t,""));return new Z({functionName:r,fileName:o[0],lineNumber:o[1],columnNumber:o[2]})}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),r=[],o=2,a=n.length;o<a;o+=2){var i=t.exec(n[o]);i&&r.push(new Z({fileName:i[2],lineNumber:parseFloat(i[1])}))}return r},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),r=[],o=0,a=n.length;o<a;o+=2){var i=t.exec(n[o]);i&&r.push(new Z({functionName:i[3]||void 0,fileName:i[2],lineNumber:parseFloat(i[1])}))}return r},parseOpera11:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(Q)&&!e.match(/^Error created at/)}),this).map((function(e){var t=e.split("@"),n=this.extractLocation(t.pop()),r=(t.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new Z({functionName:r,fileName:n[0],lineNumber:n[1],columnNumber:n[2]})}),this)}},re=[],oe=null;function ae(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch(t){return e.target}}function ie(e,t,n,r,o,a,i,s,l,u,c,d,p,f,m){var h,v,y,g=new q;re.push(g),g.init(e,n,r,o,a,i,s,l,u,c,t,d,p,f);var b=window.MutationObserver||window.__rrMutationObserver,S=null===(y=null===(v=null===(h=window)||void 0===h?void 0:h.Zone)||void 0===v?void 0:v.__symbol__)||void 0===y?void 0:y.call(v,"MutationObserver");S&&window[S]&&(b=window[S]);var C=new b(g.processMutations.bind(g));return C.observe(m,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),C}function se(e,t,n,r,o){if(!1===o.mouseInteraction)return function(){};var a=!0===o.mouseInteraction||void 0===o.mouseInteraction?{}:o.mouseInteraction,i=[];return Object.keys(y).filter((function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e]})).forEach((function(o){var a=o.toLowerCase(),s=function(t){return function(o){var a=ae(o);if(!P(a,r)){var i=j(o)?o.changedTouches[0]:o;if(i){var s=n.getId(a),l=i.clientX,u=i.clientY;e({type:y[t],id:s,x:l,y:u})}}}}(o);i.push(I(a,s,t))})),function(){i.forEach((function(e){return e()}))}}function le(e,t,n,r,o){return I("scroll",L((function(o){var a=ae(o);if(a&&!P(a,r)){var i=n.getId(a);if(a===t){var s=t.scrollingElement||t.documentElement;e({id:i,x:s.scrollLeft,y:s.scrollTop})}else e({id:i,x:a.scrollLeft,y:a.scrollTop})}}),o.scroll||100),t)}var ue=["INPUT","TEXTAREA","SELECT"],ce=new WeakMap;function de(e,r){void 0===r&&(r={}),function(e,t){var n=e.mutationCb,r=e.mousemoveCb,a=e.mouseInteractionCb,i=e.scrollCb,s=e.viewportResizeCb,l=e.inputCb,u=e.mediaInteractionCb,c=e.styleSheetRuleCb,d=e.canvasMutationCb,p=e.fontCb,f=e.logCb;e.mutationCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.mutation&&t.mutation.apply(t,o(e)),n.apply(void 0,o(e))},e.mousemoveCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mousemove&&t.mousemove.apply(t,o(e)),r.apply(void 0,o(e))},e.mouseInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mouseInteraction&&t.mouseInteraction.apply(t,o(e)),a.apply(void 0,o(e))},e.scrollCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.scroll&&t.scroll.apply(t,o(e)),i.apply(void 0,o(e))},e.viewportResizeCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.viewportResize&&t.viewportResize.apply(t,o(e)),s.apply(void 0,o(e))},e.inputCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.input&&t.input.apply(t,o(e)),l.apply(void 0,o(e))},e.mediaInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mediaInteaction&&t.mediaInteaction.apply(t,o(e)),u.apply(void 0,o(e))},e.styleSheetRuleCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.styleSheetRule&&t.styleSheetRule.apply(t,o(e)),c.apply(void 0,o(e))},e.canvasMutationCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.canvasMutation&&t.canvasMutation.apply(t,o(e)),d.apply(void 0,o(e))},e.fontCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.font&&t.font.apply(t,o(e)),p.apply(void 0,o(e))},e.logCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.log&&t.log.apply(t,o(e)),f.apply(void 0,o(e))}}(e,r);var a,i,s,l=ie(e.mutationCb,e.doc,e.blockClass,e.blockSelector,e.maskTextClass,e.maskTextSelector,e.inlineStylesheet,e.maskInputOptions,e.maskTextFn,e.recordCanvas,e.slimDOMOptions,e.mirror,e.iframeManager,e.shadowDomManager,e.doc),u=function(e,t,n,r){if(!1===t.mousemove)return function(){};var o,a,i="number"==typeof t.mousemove?t.mousemove:50,s="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500,l=[];function u(t){if(l.length){oe=null,void 0===t&&(t=Date.now());var n=t-o;e(l.map((function(e){return e.timeOffset-=n,e})),a,t),l=[],o=null}}var c=L(u,s),d=L((function(e){var t=ae(e),n=j(e)?e.changedTouches[0]:e,i=n.clientX,s=n.clientY;o||(o=Date.now()),l.push({x:i,y:s,id:r.getId(t),timeOffset:Date.now()-o}),a=e instanceof MouseEvent?v.MouseMove:e instanceof DragEvent?v.Drag:v.TouchMove,oe=u,c()}),i,{trailing:!1}),p=[I("mousemove",d,n),I("touchmove",d,n),I("drag",d,n)];return function(){p.forEach((function(e){return e()}))}}(e.mousemoveCb,e.sampling,e.doc,e.mirror),c=se(e.mouseInteractionCb,e.doc,e.mirror,e.blockClass,e.sampling),d=le(e.scrollCb,e.doc,e.mirror,e.blockClass,e.sampling),p=(a=e.viewportResizeCb,i=-1,s=-1,I("resize",L((function(){var e=R(),t=A();i===e&&s===t||(a({width:Number(t),height:Number(e)}),i=e,s=t)}),200),window)),f=function(e,n,r,a,i,s,l,u){function c(e){var t=ae(e);if(t&&t.tagName&&!(ue.indexOf(t.tagName)<0)&&!P(t,a)){var r=t.type;if("password"!==r&&!t.classList.contains(i)){var o=t.value,u=!1;"radio"===r||"checkbox"===r?u=t.checked:(s[t.tagName.toLowerCase()]||s[r])&&(o=l?l(o):"*".repeat(o.length)),d(t,{text:o,isChecked:u});var c=t.name;"radio"===r&&c&&u&&n.querySelectorAll('input[type="radio"][name="'+c+'"]').forEach((function(e){e!==t&&d(e,{text:e.value,isChecked:!u})}))}}}function d(n,o){var a=ce.get(n);if(!a||a.text!==o.text||a.isChecked!==o.isChecked){ce.set(n,o);var i=r.getId(n);e(t(t({},o),{id:i}))}}var p=("last"===u.input?["change"]:["input","change"]).map((function(e){return I(e,c,n)})),f=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),m=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"]];return f&&f.set&&p.push.apply(p,o(m.map((function(e){return D(e[0],e[1],{set:function(){c({target:this})}})})))),function(){p.forEach((function(e){return e()}))}}(e.inputCb,e.doc,e.mirror,e.blockClass,e.ignoreClass,e.maskInputOptions,e.maskInputFn,e.sampling),m=function(e,t,n){var r=function(r){return function(o){var a=ae(o);a&&!P(a,t)&&e({type:"play"===r?g.Play:g.Pause,id:n.getId(a)})}},o=[I("play",r("play")),I("pause",r("pause"))];return function(){o.forEach((function(e){return e()}))}}(e.mediaInteractionCb,e.blockClass,e.mirror),h=function(e,t){var n=CSSStyleSheet.prototype.insertRule;CSSStyleSheet.prototype.insertRule=function(r,o){var a=t.getId(this.ownerNode);return-1!==a&&e({id:a,adds:[{rule:r,index:o}]}),n.apply(this,arguments)};var r=CSSStyleSheet.prototype.deleteRule;return CSSStyleSheet.prototype.deleteRule=function(n){var o=t.getId(this.ownerNode);return-1!==o&&e({id:o,removes:[{index:n}]}),r.apply(this,arguments)},function(){CSSStyleSheet.prototype.insertRule=n,CSSStyleSheet.prototype.deleteRule=r}}(e.styleSheetRuleCb,e.mirror),y=e.recordCanvas?function(e,t,r){var a,i,s=Object.getOwnPropertyNames(CanvasRenderingContext2D.prototype),l=[],u=function(n){try{if("function"!=typeof CanvasRenderingContext2D.prototype[n])return"continue";var a=F(CanvasRenderingContext2D.prototype,n,(function(a){return function(){for(var i=this,s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return P(this.canvas,t)||setTimeout((function(){var t=o(s);if("drawImage"===n&&t[0]&&t[0]instanceof HTMLCanvasElement){var a=t[0],l=a.getContext("2d"),u=null==l?void 0:l.getImageData(0,0,a.width,a.height),c=null==u?void 0:u.data;t[0]=JSON.stringify(c)}e({id:r.getId(i.canvas),property:n,args:t})}),0),a.apply(this,s)}}));l.push(a)}catch(t){var i=D(CanvasRenderingContext2D.prototype,n,{set:function(t){e({id:r.getId(this.canvas),property:n,args:[t],setter:!0})}});l.push(i)}};try{for(var c=n(s),d=c.next();!d.done;d=c.next()){u(d.value)}}catch(e){a={error:e}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}return function(){l.forEach((function(e){return e()}))}}(e.canvasMutationCb,e.blockClass,e.mirror):function(){},b=e.collectFonts?function(e){var t=[],n=new WeakMap,r=FontFace;window.FontFace=function(e,t,o){var a=new r(e,t,o);return n.set(a,{family:e,buffer:"string"!=typeof t,descriptors:o,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),a};var o=F(document.fonts,"add",(function(t){return function(r){return setTimeout((function(){var t=n.get(r);t&&(e(t),n.delete(r))}),0),t.apply(this,[r])}}));return t.push((function(){window.FonFace=r})),t.push(o),function(){t.forEach((function(e){return e()}))}}(e.fontCb):function(){},S=e.logOptions?function(e,t){var r,a,i=this,s=t.logger;if(!s)return function(){};var l=0,u=[];if(t.level.includes("error")&&window){var c=window.onerror;window.onerror=function(n,r,o,a,s){c&&c.apply(i,[n,r,o,a,s]);var l=ne.parse(s).map((function(e){return e.toString()})),u=[G(n,t.stringifyOptions)];e({level:"error",trace:l,payload:u})},u.push((function(){window.onerror=c}))}try{for(var d=n(t.level),p=d.next();!p.done;p=d.next()){var f=p.value;u.push(m(s,f))}}catch(e){r={error:e}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(r)throw r.error}}return function(){u.forEach((function(e){return e()}))};function m(n,r){var a=this;return n[r]?F(n,r,(function(n){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];n.apply(a,i);try{var u=ne.parse(new Error).map((function(e){return e.toString()})).splice(1),c=i.map((function(e){return G(e,t.stringifyOptions)}));++l<t.lengthThreshold?e({level:r,trace:u,payload:c}):l===t.lengthThreshold&&e({level:"warn",trace:[],payload:[G("The number of log records reached the threshold.")]})}catch(e){n.apply(void 0,o(["rrweb logger error:",e],i))}}})):function(){}}}(e.logCb,e.logOptions):function(){};return function(){l.disconnect(),u(),c(),d(),p(),f(),m(),h(),y(),b(),S()}}var pe,fe,me,he=function(){function e(e){this.iframes=new WeakMap,this.mutationCb=e.mutationCb}return e.prototype.addIframe=function(e){this.iframes.set(e,!0)},e.prototype.addLoadListener=function(e){this.loadListener=e},e.prototype.attachIframe=function(e,t){var n;this.mutationCb({adds:[{parentId:e.__sn.id,nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,e)},e}(),ve=function(){function e(e){this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror}return e.prototype.addShadowRoot=function(e,t){ie(this.mutationCb,t,this.bypassOptions.blockClass,this.bypassOptions.blockSelector,this.bypassOptions.maskTextClass,this.bypassOptions.maskTextSelector,this.bypassOptions.inlineStylesheet,this.bypassOptions.maskInputOptions,this.bypassOptions.maskTextFn,this.bypassOptions.recordCanvas,this.bypassOptions.slimDOMOptions,this.mirror,this.bypassOptions.iframeManager,this,e),le(this.scrollCb,e,this.mirror,this.bypassOptions.blockClass,this.bypassOptions.sampling)},e}();function ye(e){return t(t({},e),{timestamp:Date.now()})}var ge={map:{},getId:function(e){return e.__sn?e.__sn.id:-1},getNode:function(e){return this.map[e]||null},removeNodeFromMap:function(e){var t=this,n=e.__sn&&e.__sn.id;delete this.map[n],e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},has:function(e){return this.map.hasOwnProperty(e)},reset:function(){this.map={}}};function be(e){void 0===e&&(e={});var n=e.emit,o=e.checkoutEveryNms,a=e.checkoutEveryNth,s=e.blockClass,l=void 0===s?"rr-block":s,u=e.blockSelector,c=void 0===u?null:u,d=e.ignoreClass,p=void 0===d?"rr-ignore":d,f=e.maskTextClass,m=void 0===f?"rr-mask":f,y=e.maskTextSelector,g=void 0===y?null:y,b=e.inlineStylesheet,S=void 0===b||b,C=e.maskAllInputs,k=e.maskInputOptions,w=e.slimDOMOptions,x=e.maskInputFn,T=e.maskTextFn,N=e.hooks,O=e.packFn,M=e.sampling,_=void 0===M?{}:M,L=e.mousemoveWait,D=e.recordCanvas,F=void 0!==D&&D,P=e.collectFonts,z=void 0!==P&&P,j=e.recordLog,W=void 0!==j&&j;if(!n)throw new Error("emit function is required");void 0!==L&&void 0===_.mousemove&&(_.mousemove=L);var B,$,U=!0===C?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:void 0!==k?k:{},q=!0===w||"all"===w?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===w,headMetaDescKeywords:"all"===w,adPlaceholder:"all"===w}:w||{},X={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:console},Y=W?!0===W?X:Object.assign({},X,W):{};void 0===B&&(B=window),"NodeList"in B&&!B.NodeList.prototype.forEach&&(B.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in B&&!B.DOMTokenList.prototype.forEach&&(B.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(e){if(!(0 in arguments))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1});var K=0;pe=function(e,t){var r;if(oe&&oe(e.timestamp),(null===(r=re[0])||void 0===r?void 0:r.isFrozen())&&e.type!==h.FullSnapshot&&(e.type!==h.IncrementalSnapshot||e.data.source!==v.Mutation)){var i=e.timestamp;e.data.positions&&e.data.positions[0].timeOffset&&(i+=e.data.positions[0].timeOffset),re.forEach((function(e){return e.unfreeze(i)}))}if(n(O?O(e):e,t),e.type===h.FullSnapshot)$=e,K=0;else if(e.type===h.IncrementalSnapshot){if(e.data.source===v.Mutation&&e.data.isAttachIframe)return;K++;var s=a&&K>=a,l=o&&e.timestamp-$.timestamp>o;(s||l)&&me(!0)}};var J=function(e,n){pe(ye({type:h.IncrementalSnapshot,data:t({source:v.Mutation},e),timestamp:n}))},G=function(e){return pe(ye({type:h.IncrementalSnapshot,data:t({source:v.Scroll},e)}))},Z=new he({mutationCb:J}),Q=new ve({mutationCb:J,scrollCb:G,bypassOptions:{blockClass:l,blockSelector:c,maskTextClass:m,maskTextSelector:g,inlineStylesheet:S,maskInputOptions:U,maskTextFn:T,recordCanvas:F,sampling:_,slimDOMOptions:q,iframeManager:Z},mirror:ge});me=function(e){var t,n,o,a;void 0===e&&(e=!1),pe(ye({type:h.Meta,data:{href:window.location.href,width:A(),height:R()}}),e),re.forEach((function(e){return e.lock()}));var i=r(function(e,t){var n=t||{},r=n.blockClass,o=void 0===r?"rr-block":r,a=n.blockSelector,i=void 0===a?null:a,s=n.maskTextClass,l=void 0===s?"rr-mask":s,u=n.maskTextSelector,c=void 0===u?null:u,d=n.inlineStylesheet,p=void 0===d||d,f=n.recordCanvas,m=void 0!==f&&f,h=n.maskAllInputs,v=void 0!==h&&h,y=n.maskTextFn,g=n.slimDOM,b=void 0!==g&&g,S={};return[E(e,{doc:e,map:S,blockClass:o,blockSelector:i,maskTextClass:l,maskTextSelector:c,skipChild:!1,ignoreChildren:!1,inlineStylesheet:p,maskInputOptions:!0===v?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===v?{password:!0}:v,maskTextFn:y,slimDOMOptions:!0===b||"all"===b?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===b,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0,adPlaceholder:"all"===b}:!1===b?{}:b,recordCanvas:m,preserveWhiteSpace:n.preserveWhiteSpace,onSerialize:n.onSerialize,onIframeLoad:n.onIframeLoad,iframeLoadTimeout:n.iframeLoadTimeout,isFullSnapshot:!0}),S]}(document,{blockClass:l,blockSelector:c,maskTextClass:m,maskTextSelector:g,inlineStylesheet:S,maskAllInputs:U,maskTextFn:T,slimDOM:q,recordCanvas:F,onSerialize:function(e){H(e)&&Z.addIframe(e),V(e)&&Q.addShadowRoot(e.shadowRoot,document)},onIframeLoad:function(e,t){Z.attachIframe(e,t)}}),2),s=i[0],u=i[1];if(!s)return console.warn("Failed to snapshot the document");ge.map=u,pe(ye({type:h.FullSnapshot,data:{node:s,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null===(n=null===(t=null===document||void 0===document?void 0:document.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===document||void 0===document?void 0:document.body.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null===(a=null===(o=null===document||void 0===document?void 0:document.body)||void 0===o?void 0:o.parentElement)||void 0===a?void 0:a.scrollTop)||(null===document||void 0===document?void 0:document.body.scrollTop)||0}}})),re.forEach((function(e){return e.unlock()}))};try{var ee=[];ee.push(I("DOMContentLoaded",(function(){pe(ye({type:h.DomContentLoaded,data:{}}))})));var te=function(e){return de({mutationCb:J,mousemoveCb:function(e,t,n){return pe({type:h.IncrementalSnapshot,data:{source:t,positions:e},timestamp:n})},mouseInteractionCb:function(e){return pe(ye({type:h.IncrementalSnapshot,data:t({source:v.MouseInteraction},e)}))},scrollCb:G,viewportResizeCb:function(e){return pe(ye({type:h.IncrementalSnapshot,data:t({source:v.ViewportResize},e)}))},inputCb:function(e){return pe(ye({type:h.IncrementalSnapshot,data:t({source:v.Input},e)}))},mediaInteractionCb:function(e){return pe(ye({type:h.IncrementalSnapshot,data:t({source:v.MediaInteraction},e)}))},styleSheetRuleCb:function(e){return pe(ye({type:h.IncrementalSnapshot,data:t({source:v.StyleSheetRule},e)}))},canvasMutationCb:function(e){return pe(ye({type:h.IncrementalSnapshot,data:t({source:v.CanvasMutation},e)}))},fontCb:function(e){return pe(ye({type:h.IncrementalSnapshot,data:t({source:v.Font},e)}))},logCb:function(e){return pe(ye({type:h.IncrementalSnapshot,data:t({source:v.Log},e)}))},blockClass:l,ignoreClass:p,maskTextClass:m,maskTextSelector:g,maskInputOptions:U,inlineStylesheet:S,sampling:_,recordCanvas:F,collectFonts:z,doc:e,maskInputFn:x,maskTextFn:T,logOptions:Y,blockSelector:c,slimDOMOptions:q,mirror:ge,iframeManager:Z,shadowDomManager:Q},N)};Z.addLoadListener((function(e){ee.push(te(e.contentDocument))}));var ne=function(){me(),ee.push(te(document))};return"interactive"===document.readyState||"complete"===document.readyState?ne():ee.push(I("load",(function(){pe(ye({type:h.Load,data:{}})),ne()}),window)),fe=function(e){if(ee.forEach((function(e){return e()})),e){var t=void 0;for(t in ge.map)delete ge.map[t].__sn;i=1}}}catch(e){console.warn(e)}}return be.addCustomEvent=function(e,t){if(!pe)throw new Error("please add custom event after start recording");pe(ye({type:h.Custom,data:{tag:e,payload:t}}))},be.freezePage=function(){re.forEach((function(e){return e.freeze()}))},be.takeFullSnapshot=function(e){if(!me)throw new Error("please take full snapshot after start recording");me(e)},be.stop=function(e){void 0===e&&(e=!0),fe(e)},be.mirror=ge,be}();

